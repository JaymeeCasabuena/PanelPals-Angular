<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-lg-1 col-md-3 col-sm-4">
      <app-side-bar></app-side-bar>
    </div>

    <!-- Main Content -->
    <div class="col-lg-11 col-md-9 col-sm-8">
      <div class="row">
        <div
          class="d-flex align-items-center justify-content-between mt-2 w-100"
        >
          <!-- Centered search bar -->
          <div class="d-flex justify-content-center flex-grow-1">
            <app-search-bar></app-search-bar>
          </div>
          <!-- Avatar aligned to the far right -->
          <app-avatar [currentUser]="currentUser"></app-avatar>
        </div>
      </div>

      <!-- Book Details -->
      <div class="row mt-5 mb-5">
        <div class="col-12">
          <div
            class="main-details d-flex flex-column flex-md-row align-items-start justify-content-center mt-5 w-100"
          >
            <div class="highlight"></div>
            <div class="flex-shrink-0 me-md-4">
              <img
                [src]="comic?.Cover"
                alt="Book Image"
                class="book-photo img-fluid me-5"
              />
            </div>
            <div class="mt-4 mt-md-0 text-center text-md-start w-25">
              <div class="book-details">
                <h3 class="text-black fw-bold mt-3 ms-5 mb-4">
                  {{ comic?.Title }}
                </h3>
                <p class="text-black fst-italic ms-5">
                  {{ comic?.AuthorName }}
                </p>
                <p class="text-black fst-italic ms-5">
                  {{ this.formattedGenres }}
                </p>
                <p class="text-black fst-italic ms-5">Status: Ongoing</p>
              </div>

              <div class="d-flex border-bottom pb-3 ms-5">
                <button
                  [routerLink]="['/discussions']"
                  type="button"
                  class="btn btn-dark text-white rounded-pill p-1 px-3 me-4"
                >
                  Create New Thread ↗
                </button>
                <div
                  class="buttons d-flex align-items-center justify-content-between ms-5"
                >
                  <button class="me-4">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="black"
                      class="bi bi-bookmark"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"
                      />
                    </svg>
                    <!-- fill -->
                    <!-- <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-bookmark-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2"
                      />
                    </svg> -->
                  </button>
                  <button>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="black"
                      class="bi bi-share"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"
                      />
                    </svg>
                    <!-- fill -->
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5"/>
                      </svg> -->
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="sub-details mb-5 w-100 overflow-y-scroll">
            <div class="d-flex justify-content-center align-items-start">
              <div class="w-50 ms-5">
                <p class="text-dark fw-bold">Summary</p>
                <p class="text-dark w-75">{{ comic?.Summary }}</p>
              </div>
              <div class="w-25">
                <p class="text-dark fw-bold">Read On</p>
                <p class="text-dark">{{ comic?.Link }}</p>
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-start mt-4">
              <div class="reviews w-50 ms-5">
                <p class="text-dark fw-bold ms-3">Reviews</p>
                <div
                  *ngFor="let review of reviews"
                  class="d-flex align-items justify-content-end ms-4"
                >
                  <div class="rating ms-5">
                    <app-star-rating
                      [rating]="review.Rating"
                      [maxStars]="5"
                      [readOnly]="true"
                      (ratingChange)="onRatingChange($event)"
                    ></app-star-rating>
                  </div>
                  <p class="text-dark fst-italic w-50 mt-3">
                    {{ review.ReviewText }}
                  </p>
                </div>
              </div>
              <div class="w-25">
                <p class="text-dark fw-bold">Write a review</p>
                <div class="d-flex align-items-center">
                  <app-star-rating
                    [rating]="rating"
                    [maxStars]="5"
                    (ratingChange)="onRatingChange($event)"
                  ></app-star-rating>
                </div>
                <!-- Text Editor -->
                <div class="form-group w-100">
                  <textarea
                    class="form-control"
                    rows="3"
                    placeholder="Write your review here..."
                    [(ngModel)]="reviewText"
                  ></textarea>
                </div>

                <!-- Submit Button -->
                <div class="mt-3">
                  <button
                    type="button"
                    class="btn btn-dark text-white rounded-pill p-1 px-3"
                    (click)="submitReview()"
                  >
                    Submit Review ↗
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
